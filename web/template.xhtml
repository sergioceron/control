<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core">
<!--[if lt IE 7 ]><html class="ie ie6"><![endif]-->
<!--[if IE 7 ]><html class="ie ie7"><![endif]-->
<!--[if IE 8 ]><html class="ie ie8"><![endif]-->
<h:head>
    <title>All Places Book</title>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

    <link href="/assets/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet"/>
    <link href="/assets/plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet"/>
    <link href="/assets/plugins/bootstrap-select/css/bootstrap-select.min.css" rel="stylesheet"/>
    <link href="/assets/plugins/prettyPhoto/css/prettyPhoto.css" rel="stylesheet"/>
    <link href="/assets/plugins/superfish/css/superfish.css" rel="stylesheet"/>
    <link href="/assets/plugins/isotope/jquery.isotope.css" rel="stylesheet"/>
    <link href="/assets/plugins/owl-carousel/owl.carousel.css" rel="stylesheet"/>
    <link href="/assets/plugins/owl-carousel/owl.theme.css" rel="stylesheet"/>
    <link href="/assets/plugins/animate.css" rel="stylesheet"/>
    <link href="/assets/css/theme.css" rel="stylesheet"/>
    <link href="/assets/css/theme-light.css" rel="stylesheet" id="css-switcher-link"/>
    <link href="/assets/css/flexslider.css" rel="stylesheet" media="screen, projection" />
    <link href="/assets/css/jquery.bxslider.css" rel="stylesheet" media="screen, projection" />
    <link href="/admin/assets/css/ace.min.css" rel="stylesheet" media="screen, projection" />
    <link href="/assets/css/realocation.css" rel="stylesheet" media="screen, projection" />

    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script><![endif]-->
</h:head>
<h:body>
    <!-- // Main Navigation -->
    <div id="main-container"  >
        <h:panelGroup class="navbar navbar-default" id="navbar">
            <div class="navbar-container" id="navbar-container">
                <h:panelGroup rendered="#{!identity.loggedIn}">
                <div class="container">
                    <div class="row">
                        <div class="col-sm-12">
                            <ul class="list-inline top-right">
                                <li>
                                    <a id="singin" class="signin-link popover-info" href="#" data-rel="popover" data-placement="bottom" title="Iniciar Sesión" data-contentwrapper="#login-form">Entrar</a>
                                </li>
                                <li>
                                    <a id="singup" class="signup-link" href="#">Registro</a>
                                </li>

                            </ul>
                        </div>
                    </div>
                </div>
                </h:panelGroup>

                <h:panelGroup styleClass="navbar-buttons navbar-header pull-right" rendered="#{identity.loggedIn}">
                    <h:form prependId="false" style="margin-bottom: 0px">
                    <ul class="nav ace-nav">

                        <li class="grey">
                            <a data-toggle="dropdown" class="dropdown-toggle" href="#">
                                <i class="ace-icon fa fa-tasks"></i>
                                <span class="badge badge-grey">4</span>
                            </a>
                        </li>

                        <li class="green">
                            <a data-toggle="dropdown" class="dropdown-toggle" href="#">
                                <i class="ace-icon fa fa-envelope icon-animated-vertical"></i>
                                <span class="badge badge-success">5</span>
                            </a>
                        </li>

                        <!-- #section:basics/navbar.user_menu -->
                        <li class="light-blue">
                            <a data-toggle="dropdown" href="#" class="dropdown-toggle">
                                <img class="nav-user-photo" src="../assets/avatars/user.jpg" alt="Jason's Photo" />
                                                <span class="user-info">
                                                    <small>Welcome,</small>
                                                    #{identity.username}
                                                </span>

                                <i class="ace-icon fa fa-caret-down"></i>
                            </a>

                            <ul class="user-menu dropdown-menu-right dropdown-menu dropdown-yellow dropdown-caret dropdown-close">
                                <li>
                                    <a href="/admin/settings">
                                        <i class="ace-icon fa fa-cog"></i>
                                        Settings
                                    </a>
                                </li>
                                <li>
                                    <a href="/admin/profile">
                                        <i class="ace-icon fa fa-user"></i>
                                        Profile
                                    </a>
                                </li>
                                <li class="divider"></li>
                                <li>
                                    <h:commandLink action="#{identity.logout}">
                                        <i class="ace-icon fa fa-power-off"></i>
                                        Logout
                                    </h:commandLink>
                                </li>
                            </ul>
                        </li>
                    <!-- /section:basics/navbar.user_menu -->
                    </ul>
                    </h:form>
                </h:panelGroup>
            </div>
        </h:panelGroup>

        <div class="custom-header" style="text-align: right">

            <div class="container">
                <div class="logo">
                    <a href="/"><img src="/assets/img/light/logo.png" alt="All Places Book" width="210"/></a>
                </div>
                <div id="res-menu"></div>
                <div class="rent-buy">
                    <ul>
                        <li><a href="#" class="active">Renta</a></li>
                        <li><a href="#">Venta</a></li>
                    </ul>
                </div>
            </div>
        </div>

        <ui:insert name="content" />

        <!-- Footer -->
        <div id="custom-footer" class="full-width custom-footer">
            <div class="container">
                <ui:include src="/footer.xhtml" />
            </div>
        </div>

        <div class="full-width footer-line">
            <div class="container">
                <div class="col-sm-12">
                    <p class="copyright">Copyright AllPlacesBook 2013 | Todos los derechos reservados</p>
                </div>
            </div>
        </div>
    </div>

    <div id="login-form" style="display: none">
        <h:form prependId="false" style="width: 250px">
            <div class="form-group">
                <label>Usuario</label>
                <h:inputText value="#{identity.username}" styleClass="form-control" id="usernameField1"/>
            </div>

            <div class="form-group">
                <label>Contraseña</label>
                <h:inputSecret value="#{identity.password}" styleClass="form-control" id="passwordField1"/>
            </div>

            <div class="form-group">
                <h:commandButton action="#{identity.login}" value="Login" styleClass="btn btn-primary btn-inversed btn-block" />
            </div>
        </h:form>
    </div>

    <h:panelGroup class="register-container position-absolute" style="z-index: 1000;display:none" id="register-box"
                  rendered="#{!identity.loggedIn}">
            <div id="signup-box" class="signup-box widget-box no-border">
                <div class="widget-body">
                    <div class="widget-main">
                        <h4 class="green lighter bigger">
                            <i class="ace-icon fa fa-users blue"></i>
                            Registration
                        </h4>

                        <div class="space-6"></div>
                        <p> Enter your details to begin: </p>

                        <h:form prependId="false" id="register-form">
                            <fieldset>
                                <label class="block clearfix">
                                    <span class="block input-icon input-icon-right">
                                        <h:inputText value="#{registerController.user.name}" styleClass="form-control" placeholder="Name" id="name"/>
                                        <i class="ace-icon fa fa-user"></i>
                                    </span>
                                </label>

                                <label class="block clearfix">
                                    <span class="block input-icon input-icon-right">
                                        <h:inputText value="#{registerController.user.username}" styleClass="form-control" placeholder="Email" id="email" />
                                        <i class="ace-icon fa fa-envelope"></i>
                                    </span>
                                </label>

                                <label class="block clearfix">
                                    <span class="block input-icon input-icon-right">
                                        <h:inputSecret value="#{registerController.user.hash}" styleClass="form-control" placeholder="Password" id="password"/>
                                        <i class="ace-icon fa fa-lock"></i>
                                    </span>
                                </label>

                                <label class="block clearfix">
                                    <span class="block input-icon input-icon-right">
                                        <h:inputSecret value="#{registerController.rehash}" styleClass="form-control" placeholder="Repeat password" id="repassword"/>
                                        <i class="ace-icon fa fa-retweet"></i>
                                    </span>
                                </label>

                                <label class="block">
                                    <h:selectBooleanCheckbox value="#{registerController.terms}" styleClass="ace" id="terms"/>
                                    <span class="lbl">
                                        I accept the
                                        <a href="#">User Agreement</a>
                                    </span>
                                </label>

                                <div class="space-24"></div>

                                <div class="clearfix">
                                    <a class="width-30 pull-left btn btn-sm" id="cancel">
                                        <i class="ace-icon fa fa-refresh"></i>
                                        <span class="bigger-110">Cancel</span>
                                    </a>

                                    <button type="submit" class="width-65 pull-right btn btn-sm btn-success">
                                        <i class="ace-icon fa fa-refresh"></i>
                                        <span class="bigger-110">Register</span>

                                        <i class="ace-icon fa fa-arrow-right icon-on-right"></i>
                                    </button>

                                    <h:commandLink action="#{registerController.register}" style="display: none" id="register">
                                    </h:commandLink>
                                </div>
                            </fieldset>
                        </h:form>
                    </div>

                </div><!-- /.widget-body -->
            </div><!-- /.signup-box -->
    </h:panelGroup>

    <script src="/assets/js/jquery.js"></script>
    <script src="/assets/js/jquery-migrate-1.2.1.js"></script>
    <script src="/assets/plugins/jquery-ui.v1.10.4/jquery-ui.js"></script>
    <script src="/assets/plugins/bootstrap/js/bootstrap.min.js"></script>
    <script src="/assets/js/modernizr.custom.js"></script>
    <script src="/assets/plugins/prettyPhoto/js/jquery.prettyPhoto.js"></script>
    <script src="/assets/plugins/superfish/js/superfish.js"></script>
    <script src="/assets/plugins/isotope/jquery.isotope.min.js"></script>
    <script src="/assets/plugins/bootstrap-select/js/bootstrap-select.min.js"></script>
    <script src="/assets/plugins/owl-carousel/owl.carousel.min.js"></script>
    <script src="/assets/plugins/jquery.cookie.js"></script>
    <script src="/assets/plugins/ajax-mail.js" type="text/javascript"></script>
    <script src="/assets/js/main.js"></script>
    <script src="/admin/assets/js/jquery.validate.min.js"></script>
    <!--[if (gte IE 9)|!(IE)]><!-->
    <!--<script src="assets/plugins/style-switcher/style.switcher.js"></script>-->
    <!--<![endif]-->

    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&amp;sensor=false"></script>
    <!--<h:outputScript>
        //<![CDATA[
        var script = '<script type="text/javascript" src="http://google-maps-' +
                'utility-library-v3.googlecode.com/svn/trunk/infobubble/src/infobubble';
        if( document.location.search.indexOf( 'compiled' ) !== -1 ) {
            script += '-compiled';
        }
        script += '.js"><' + '/script>';
        document.write( script );
        //]]>
    </h:outputScript>
    <script src="assets/js/gmap.js"></script>-->

    <h:outputScript>
        //<![CDATA[
        $('[data-rel=popover]').popover( {
                html:true,
                content:function(){
                    return $($(this).data('contentwrapper')).html();
                }
        });

        jQuery( function( $ ) {
            $('#singup' ).click(function(){
                $('#main-container' ).css('-webkit-filter', 'blur(5px)');
                $('#register-box' ).toggle();
            });

            $('#cancel' ).click(function(){
                $('#main-container' ).css('-webkit-filter', 'blur(0px)');
                $('#register-box' ).toggle();
            });

            $(document).keyup(function(e) {
                if (e.keyCode == 27) {
                    $('#main-container' ).css('-webkit-filter', 'blur(0px)');
                    $('#register-box' ).hide();
                }
            });

            $('#register-form').validate({
                errorElement: 'label',
                errorClass: 'help-block',
                focusInvalid: true,
                rules: {
                    email: {
                        required: true,
                        email: true,
                        remote: '/seam/resource/rest/user/exist'
                    },
                    name: {
                        required: true,
                        minlength: 5
                    },
                    hash: "required",
                    password: "required",
                    repassword: {
                        equalTo: "#password"
                    }
                },

                messages: {
                    email: {
                        remote: jQuery.validator.format("{0} is already taken.")
                    },
                    repassword: {
                        equalTo: "Ambas contraseñas deben coincidir"
                    }
                },


                highlight: function (e) {
                    $(e).closest('.block').removeClass('has-info').addClass('has-error');
                },

                success: function (e) {
                    $(e).closest('.block').removeClass('has-error');//.addClass('has-info');
                    $(e).remove();
                },

                errorPlacement: function (error, element) {
                    if(element.is(':checkbox') || element.is(':radio')) {
                        var controls = element.closest('div[class*="col-"]');
                        if(controls.find(':checkbox,:radio').length > 1) controls.append(error);
                        else error.insertAfter(element.nextAll('.lbl:eq(0)').eq(0));
                    }
                    else if(element.is('.select2')) {
                        error.insertAfter(element.siblings('[class*="select2-container"]:eq(0)'));
                    }
                    else if(element.is('.chosen-select')) {
                        error.insertAfter(element.siblings('[class*="chosen-container"]:eq(0)'));
                    }
                    else error.insertAfter(element.parent());
                },

                submitHandler: function (form) {
                    $('#register' ).click();
                },
                invalidHandler: function (form) {
                }
            });

        } );
        //]]>
    </h:outputScript>

    <script src="/assets/js/gmap3.clusterer.js"></script>
    <script src="/assets/js/gmap3.infobox.js"></script>
    <script src="/assets/js/map.js"></script>

    <script type="text/javascript" src="/assets/js/jquery.flexslider.js"></script>
    <script type="text/javascript" src="/assets/js/jquery.bxslider.min.js"></script>
    <script type="text/javascript" src="/assets/js/collapse.js"></script>
    <script type="text/javascript" src="/assets/js/transition.js"></script>
    <script type="text/javascript" src="/assets/js/realocation.js"></script>


    <ui:insert name="inlineScripts" />

</h:body>
</html>
